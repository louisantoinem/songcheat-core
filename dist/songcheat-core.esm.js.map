{"version":3,"file":"songcheat-core.esm.js","sources":["../src/utils.js","../src/parser.js","../src/compiler.js","../src/lyrics.js","../src/chordpix.js","../src/vextab.js","../node_modules/@mohayonao/wave-tables/index.js","../src/player.js"],"sourcesContent":["export class Utils {\n  /**\n   * Array helper functions\n   */\n\n  static arraysEqual (a, b) {\n    if (a === b) return true\n    if (a === null || b === null) return false\n    if (a.length !== b.length) return false\n    for (var i = 0; i < a.length; ++i) {\n      if (a[i] !== b[i]) return false\n    }\n    return true\n  }\n\n  /**\n   * String helper functions\n   */\n\n  static title (str) {\n    return '\\n' + this.spaces(str.length + 8, '*') + '\\n*** ' + str + ' ***\\n' + this.spaces(str.length + 8, '*') + '\\n'\n  }\n\n  static firstUpper (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1)\n  }\n\n  static camelCase (s, firstUpper) {\n    var camel = s.toLowerCase().replace(/(?:[-_])(.)/g, function (match, group1) { return group1.toUpperCase() })\n    return firstUpper ? camel.charAt(0).toUpperCase() + camel.slice(1) : camel\n  }\n\n  static spaces (length, char) {\n    if (isNaN(length) || !isFinite(length) || length < 0) throw new Error('Length must a positive finite number')\n    var s = ''\n    for (var i = 0; i < length; i++) s += char || ' '\n    return s\n  }\n\n  static replaceComposedChars (s) {\n    // fix composed UTF8 characters (not handled correctly by ACE when typing a newline after one of those)\n    // http://php.net/manual/fr/regexp.reference.unicode.php\n    // http://www.fileformat.info/info/unicode/category/Mn/list.htm\n\n    s = s.replace(/a\\u0300/g, 'à')\n    s = s.replace(/e\\u0300/g, 'è')\n    s = s.replace(/e\\u0301/g, 'é')\n    s = s.replace(/e\\u0302/g, 'ê')\n    s = s.replace(/i\\u0302/g, 'î')\n    s = s.replace(/o\\u0302/g, 'ô')\n    s = s.replace(/u\\u0302/g, 'û')\n    s = s.replace(/a\\u0302/g, 'â')\n    s = s.replace(/o\\u0303/g, 'õ')\n    s = s.replace(/a\\u0303/g, 'ã')\n\n    return s\n  }\n\n  /**\n   * Interlace two multi line strings: one line of each file in alternance\n   * If the second file contains more line then the first one, these additional lines will be ignored\n   **/\n\n  static interlace (text1, text2, sepLine, keepEmptyLines) {\n    var a1 = text1.split(/\\r?\\n/)\n    var a2 = text2.split(/\\r?\\n/)\n    var a = a1.map(function (v, i) {\n      let lines = keepEmptyLines || (a2[i] && a2[i].trim()) ? [v, a2[i]] : [v]\n      if (typeof sepLine === 'string') lines.push(sepLine)\n      return lines.join('\\n')\n    })\n    return a.join('\\n')\n  }\n\n  /**\n   * Encode given parameters as a GET query string\n   **/\n\n  static encodeQueryData (data) {\n    let ret = []\n    for (let d in data) { ret.push(encodeURIComponent(d) + '=' + encodeURIComponent(data[d])) }\n    return ret.join('&')\n  }\n\n  /**\n   * Convert a duration code to the smallest unit (64th)\n   **/\n\n  static duration (code) {\n    if (code === ':32') return 2\n    if (code === ':16') return 4\n    if (code === ':8') return 8\n    if (code === ':q') return 16\n    if (code === ':h') return 32\n    if (code === ':w') return 64\n\n    if (code === ':32d') return 3\n    if (code === ':16d') return 6\n    if (code === ':8d') return 12\n    if (code === ':qd') return 24\n    if (code === ':hd') return 48\n    if (code === ':wd') return 96\n\n    throw new Error('Invalid duration code \"' + code + '\"')\n  }\n\n  /**\n   * Convert back a number of units (64th) into a duration code\n   **/\n\n  static durationcode (units) {\n    for (let code of ['w', 'h', 'q', '8', '16', '32']) {\n      if (this.duration(':' + code) === units) return ':' + code\n      if (this.duration(':' + code + 'd') === units) return ':' + code + 'd'\n    }\n\n    throw new Error('Could not find a code with a value of ' + units + ' units')\n  }\n\n  /**\n   * Convert a number of units (64th) into one or several duration codes\n   **/\n\n  static durationcodes (units) {\n    var codes = []\n\n    var current = units\n    var rest = 0\n\n    while (current > 0) {\n      try {\n        codes.push(this.durationcode(current))\n        current = rest\n        rest = 0\n      } catch (e) {\n        current--\n        rest++\n      }\n    }\n\n    if (rest > 0) throw new Error('Could not find codes adding to a value of ' + units + ' units')\n\n    return codes\n  }\n\n  /**\n   * Convert a fret number (up to 35) to a single char (digit or capital letter)\n   * Fret 10 is notated as A, 11 as B, ... and 35 as Z\n   */\n\n  static fret2char (fret) {\n    if (isNaN(fret) || fret < 0 || fret > 35) throw new Error('Cannot convert fret number ' + fret + ' to a single char (expected a value between 0 and 35)')\n    return fret < 10 ? '' + fret : String.fromCharCode('A'.charCodeAt(0) + fret - 10)\n  }\n\n  /**\n   * Convert a single char (digit or capital letter) to a fret number\n   * A means fret 10, 11 fret B, ... and Z fret 35\n   */\n\n  static char2fret (char) {\n    if (typeof char !== 'string') throw new Error('Invalid fret char ' + char + ' expected a string')\n    if (!char.match(/^[0-9A-Z]$/)) throw new Error('Invalid fret char ' + char + ' (expected a value between [0-9] or [A-Z])')\n    return char >= 'A' ? 10 + char.charCodeAt(0) - 'A'.charCodeAt(0) : parseInt(char, 10)\n  }\n\n  /**\n   * Convert an absolute fret number (single char) to a relative fret number (0 never changes)\n   */\n\n  static abs2rel (char, startingFret) {\n    let fret = this.char2fret(char)\n    if (isNaN(fret) || fret < 0) throw new Error('Invalid fret number ' + fret + ' (expected a positive or 0 integer value)')\n    if (fret === 0) return 0\n    if (isNaN(startingFret) || startingFret < 0) throw new Error('Invalid starting fret number ' + startingFret + ' (expected a positive or 0 integer value)')\n    if (startingFret + 8 < fret || startingFret > fret) throw new Error('Fret ' + fret + ' cannot be made relative to starting fret ' + startingFret + ' within the allowed range of 1 to 9')\n    return fret + 1 - startingFret\n  }\n\n  /**\n   * Convert a relative fret number to an absolute fret number (single char) (0 never changes)\n   */\n\n  static rel2abs (relFret, startingFret) {\n    return this.fret2char(relFret ? relFret + startingFret - 1 : relFret)\n  }\n\n  /**\n   * Take a chord and a placeholder contents\n   * Return an array containing one object { string, fret, mute } for each played string\n   */\n\n  static chordStrings (chord, strings) {\n    if (!chord.tablature) throw new Error('Tablature not defined for chord ' + chord.name)\n    if (!chord.fingering) throw new Error('Fingering not defined for chord ' + chord.name)\n\n    var result = []\n    for (var i = 0; i < chord.tablature.length; i++) {\n      // string will be between 6 and 1 since chord.tablature.length has been verified and is 6\n      var string = 6 - i\n\n      // string never played in this chord\n      if (chord.tablature[i] === 'x') continue\n\n      // first time we meet a played string, it's the bass so replace B and B' with the string number\n      strings = strings.replace(/B'/g, (string >= 5 ? string - 1 : string))\n      strings = strings.replace(/B/g, string)\n\n      // check if this string should be played with the right hand\n      // * means \"all strings\", otherwise concatenated specific string numbers are specified (or B for bass or B' for alternate bass)\n      // x after string means muted (ghost) note\n      if (strings.match(/^\\*/) || strings.indexOf(string) !== -1) {\n        let fret = this.char2fret(chord.tablature[i])\n        let xIndex = strings.match(/^\\*/) ? 1 : strings.indexOf(string) + 1\n        let mute = strings[xIndex] === 'x'\n        result.push({\n          string: string,\n          fret: fret,\n          mute: mute\n        })\n      }\n    }\n\n    // if chord has no string in common with strings, return a muted chord (on all strings) in order not to get an error in vextab (empty chord not allowed)\n    if (result.length === 0) return Utils.chordStrings(chord, '*x')\n\n    return result\n  }\n\n  /**\n    * Return string for chord duration\n    */\n\n  static getChordDisplay (chordDuration) {\n    // one space instead of empty string if hidden (ensures that a white space in ascii lyrics will show that next change does not happen at the begin of the bar)\n    if (chordDuration.hidden) return ' '\n\n    // space if inline (still takes some space in ascii lyrics but no name displayed)\n    if (chordDuration.chord.inline) return ' '\n\n    // a space prevents chord names to be glued together on group and prevents a next group from starting directly after last chord of previous group\n    return chordDuration.chord.name + ' '\n  }\n}\n","import { Utils } from './utils'\n\nexport class ParserException {\n  constructor (line, message) {\n    this.message = message\n    this.line = line\n  }\n\n  toString () {\n    return 'Parser error at line ' + this.line + ': ' + this.message\n  }\n}\n\nclass Parser_ {\n  constructor () {\n    this.songcheat = {}\n  }\n\n  parse (text) {\n    // reset\n    this.songcheat = {}\n\n    // split text into tokens\n    let tokens = this.tokenize(text)\n    if (tokens.length === 0) return this.songcheat\n\n    let tokenIndex = 0\n    while (tokenIndex < tokens.length) {\n      let token = tokens[tokenIndex]\n      let keyword = this.isKeyword(token)\n\n      // we must be on a keyword, otherwise it means that first token in text is not a keyword as expected\n      if (!keyword) throw new ParserException(token.line, 'expected keyword, found \"' + token.value + '\"')\n\n      // get all tokens until next keyword or end\n      let params = []\n      for (++tokenIndex; tokenIndex < tokens.length; ++tokenIndex) {\n        if (this.isKeyword(tokens[tokenIndex])) break\n        params.push(tokens[tokenIndex])\n      }\n\n      // use specific handler if any or default one\n      let handler = this['handle' + Utils.firstUpper(keyword)] || this.handleDefault\n      if (typeof handler === 'function') handler.call(this, token.line, keyword, params)\n      else throw new ParserException(token.line, 'non function handler found for keyword ' + keyword)\n    }\n\n    return this.songcheat\n  }\n\n  getPrecedingKeyword (text, line) {\n    // reset\n    this.songcheat = {}\n\n    let lastResult = null\n\n    // split text into tokens\n    let tokens = this.tokenize(text)\n    if (tokens.length === 0) return true\n\n    let tokenIndex = 0\n    while (tokenIndex < tokens.length) {\n      let token = tokens[tokenIndex]\n      let keyword = this.isKeyword(token)\n\n      if (token.line > line) return lastResult\n\n      // we must be on a keyword, otherwise it means that first token in text is not a keyword as expected\n      if (!keyword) throw new ParserException(token.line, 'expected keyword, found \"' + token.value + '\"')\n\n      // get all tokens until next keyword or end\n      let params = []\n      for (++tokenIndex; tokenIndex < tokens.length; ++tokenIndex) {\n        if (this.isKeyword(tokens[tokenIndex])) break\n        params.push(tokens[tokenIndex])\n      }\n\n      // use specific handler if any or default one\n      let handler = this['handle' + Utils.firstUpper(keyword)] || this.handleDefault\n      if (typeof handler === 'function') handler.call(this, token.line, keyword, params)\n      else throw new ParserException(token.line, 'non function handler found for keyword ' + keyword)\n\n      lastResult = { line: token.line, keyword: keyword, params: params, chordIndex: null, rhythmIndex: null, partIndex: null, unitIndex: null }\n\n      if (keyword === 'chord') lastResult.chordIndex = this.songcheat.chords.length - 1\n      else if (keyword === 'rhythm') lastResult.rhythmIndex = this.songcheat.rhythms.length - 1\n      else if (keyword === 'part' || keyword === 'sub') lastResult.partIndex = this.songcheat.parts.length - 1\n      else if (keyword === 'structure') {\n        // special case since there is no distinct UNIT keyword for each unit, but a single STRUCTURE keyword for all units\n        let paramIndex = 0\n        for (let param of params) {\n          if (param.line > line) break\n          lastResult.unitIndex = Math.floor(paramIndex / 2)\n          paramIndex++\n        }\n      }\n    }\n\n    return lastResult\n  }\n\n  isKeyword (token) {\n    let keyword = Utils.camelCase(token.value)\n    return ['artist', 'title', 'year', 'difficulty', 'video', 'tutorial', 'comment', 'tuning', 'capo', 'key', 'time', 'tempo', 'shuffle', 'chord', 'rhythm', 'sub', 'part', 'lyricsUnit' /* will disappear soon */, 'structure'].indexOf(keyword) >= 0 ? keyword : false\n  }\n\n  tokenize (text) {\n    let tokens = []\n\n    // https://stackoverflow.com/questions/4780728/regex-split-string-preserving-quotes?noredirect=1&lq=1\n    let reSpaces = /(?<=^[^\"]*(?:\"[^\"]*\"[^\"]*)*)[\\s\\t]+(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/\n    let reNewline = /(?<=^[^\"]*(?:\"[^\"]*\"[^\"]*)*)(\\r?\\n)(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/\n\n    let lineNumber = 1\n\n    // split at newlines unless enclosed in quotes\n    for (let line of text.split(reNewline)) {\n      // split also returns the newlines, ignore them\n      if (line.match(/^\\r?\\n$/)) continue\n\n      // trim line\n      line = line.trim()\n\n      // console.log(\"L\" + lineNumber + \": [\"+ line + \"]\");\n\n      // if not a comment or empty line\n      if (line && !line.match(/^#/)) {\n        // split at spaces and tabs unless enclosed in quotes, then trim spaces and quotes\n        let values = line.split(reSpaces).map(s => s.trim().replace(/^\"|\"$/g, ''))\n\n        for (let vIndex = 0; vIndex < values.length; vIndex++) {\n          let value = values[vIndex]\n\n          // if token starts with a [ and does not end on ], concatenate next tokens until ] found\n          if (value.match(/^\\[/)) { while (vIndex < values.length - 1 && !value.match(/\\]$/)) value += ' ' + values[++vIndex] }\n\n          tokens.push({ 'value': value, 'line': lineNumber })\n        }\n      }\n\n      // increment line number\n      lineNumber += (1 + (line.match(/(?:\\r?\\n)/g) || []).length)\n    }\n\n    return tokens\n  }\n\n  handleDefault (line, keyword, params) {\n    if (params.length !== 1) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 1 value, but found ' + params.length)\n    this.songcheat[keyword] = ['year', 'capo', 'difficulty'].indexOf(keyword) >= 0 ? parseInt(params[0].value, 10) : params[0].value\n  }\n\n  handleSignature (line, keyword, params) {\n    if (params.length !== 1) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 1 value, but found ' + params.length)\n    this.songcheat['signature'] = this.songcheat['signature'] || {}\n    this.songcheat['signature'][keyword] = keyword === 'tempo' ? parseFloat(params[0].value, 10) : params[0].value\n  }\n\n  handleKey (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n  handleTempo (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n  handleShuffle (line, keyword, params) { return this.handleSignature(line, keyword, params) }\n\n  handleTime (line, keyword, params) {\n    if (params.length !== 3) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 3 values, but found ' + params.length)\n    this.songcheat['signature'] = this.songcheat['signature'] || []\n    this.songcheat['signature']['time'] = { 'beatsPerBar': params[1].value, 'beatDuration': params[2].value, 'symbol': params[0].value }\n  }\n\n  handleChord (line, keyword, params) {\n    if (params.length < 2 || params.length > 4) throw new ParserException(line, keyword.toUpperCase() + ' expected between 2 and 4 values (name, tablature[, fingering=\"000000/-\", comment=\"\"]), but found ' + params.length)\n\n    let name = params[0].value\n    let tablature = params[1].value\n    let fingering = params.length >= 3 ? params[2].value : '000000/-'\n    let comment = params.length >= 4 ? params[3].value : ''\n\n    this.songcheat['chords'] = this.songcheat['chords'] || []\n    let chord = { 'id': this.songcheat['chords'].length + 1, 'name': name, 'tablature': tablature, 'fingering': fingering, 'comment': comment }\n    this.songcheat['chords'].push(chord)\n\n    // return created chord (used when meeting an inline chord)\n    return chord\n  }\n\n  handleRhythm (line, keyword, params) {\n    if (params.length !== 2) throw new ParserException(line, keyword.toUpperCase() + ' expected exactly 2 values (id and score), but found ' + params.length)\n\n    this.songcheat['rhythms'] = this.songcheat['rhythms'] || []\n    let rhythm = { 'id': this.songcheat['rhythms'].length + 1, 'name': params[0].value, 'score': params[1].value }\n    this.songcheat['rhythms'].push(rhythm)\n\n    // return created rhythm (used when meeting an inline rhythm)\n    return rhythm\n  }\n\n  readBar (param) {\n    let bar = { 'rhythm': null, 'chords': [] }\n    let str = param.value.substr(1, param.value.length - 2)\n    let parts = str.split(/\\*|,/)\n\n    // find rhythm by its name (if several, use last one)\n    let foundRhythmId = null\n    for (let rhythm of this.songcheat['rhythms']) {\n      if (rhythm.name === parts[0]) {\n        foundRhythmId = rhythm.id\n        // break\n      }\n    }\n\n    // if no rhythm found with this name but this is a potential score (at least one pair of parenthesis)\n    if (foundRhythmId === null && parts[0].match(/\\(.*\\)/)) {\n      // create inline rhythm with the name begin the score itself (so the rhythm is found next time if used several times)\n      let rhythm = this.handleRhythm(param.line, 'rhythm', [{ value: parts[0], line: param.line }, { value: parts[0], line: param.line }])\n      rhythm.inline = true // will be hidden in Rhythm panel\n      foundRhythmId = rhythm.id\n    }\n\n    if (foundRhythmId !== null) bar.rhythm = foundRhythmId\n    else throw new ParserException(param.line, parts[0] + ' is not the name of an existing rhythm')\n\n    // find chords\n    parts = parts.slice(1)\n    for (let part of parts) {\n      // chord repeater\n      if (!part.trim()) {\n        if (bar.chords.length === 0) throw new ParserException(param.line, 'found chord repeater but there is no chord yet in bar')\n        bar.chords.push(JSON.parse(JSON.stringify(bar.chords[bar.chords.length - 1])))\n        continue\n      }\n\n      // search for chord by its name (if several, use last one)\n      let foundChordId = null\n      for (let chord of this.songcheat['chords']) {\n        if (chord.name === part) {\n          foundChordId = chord.id\n          // break\n        }\n      }\n\n      // if no chord found with this name but this is a valid chord tablature (with an optional barred fret /[-0-9A-Z])\n      if (foundChordId === null && part.match(/^[x0-9A-Z]{6}(\\/[-0-9A-Z])?$/)) {\n        // create inline chord with the name being the tablature itself (so the chord is found next time if used several times), and no fingering nor comment\n        let chord = this.handleChord(param.line, 'chord', [{ value: part, line: param.line }, { value: part.split('/')[0], line: param.line }, { value: '000000/' + (part.split('/')[1] || '-'), line: param.line }])\n        chord.inline = true // will be hidden in Chords panel and not displayed as a chord change\n        foundChordId = chord.id\n      }\n\n      if (foundChordId !== null) bar.chords.push(foundChordId)\n      else throw new ParserException(param.line, part + ' is not the name of an existing chord and is not a valid chord tablature')\n    }\n\n    return bar\n  }\n\n  handleSub (line, keyword, params) {\n    // a sub is a part like any other but with \"sub\" = true (will not be displayed in Parts panel)\n    let part = this.handlePart(line, keyword, params)\n    part.sub = true\n  }\n\n  handlePart (line, keyword, params) {\n    if (params.length < 2) throw new ParserException(line, keyword.toUpperCase() + ' expected at least 2 values (name and bar(s)), but found ' + params.length)\n    this.songcheat['parts'] = this.songcheat['parts'] || []\n\n    // extract part name from params\n    let part = { 'id': this.songcheat['parts'].length + 1, 'name': params[0].value, 'phrases': [] }\n    params = params.splice(1)\n    this.songcheat['parts'].push(part)\n\n    // iterate on remaining params to get bars and phrases\n    let bars = []\n    for (let pIndex = 0; pIndex < params.length; pIndex++) {\n      let param = params[pIndex]\n\n      // phrase separator\n      if (param.value === '||') {\n        part.phrases.push({ 'bars': bars })\n        bars = []\n        continue\n      }\n\n      // bar repeater\n      if (param.value === '%') {\n        if (bars.length === 0) throw new ParserException(param.line, 'found bar repeater ' + param.value + ' but there is no bar yet in phrase')\n        bars.push(JSON.parse(JSON.stringify(bars[bars.length - 1])))\n        continue\n      }\n\n      // bar between []\n      if (param.value.match(/^\\[[^[\\]]+\\]$/)) {\n        bars.push(this.readBar(param))\n        continue\n      }\n\n      // not a || phrase separator nor a [] bar: must be a part name\n      // so search for part by its name (if several, use last one)\n      let foundPart = null\n      for (let p of this.songcheat['parts']) {\n        if (p.name === param.value) {\n          foundPart = p\n          // break\n        }\n      }\n\n      // insert found part at current position\n      if (foundPart !== null) {\n        let phraseIndex = 0\n        for (let ph of foundPart.phrases) {\n          if (phraseIndex > 0) {\n            part.phrases.push({ 'bars': bars })\n            bars = []\n          }\n          for (let b of ph.bars) bars.push(b)\n          phraseIndex++\n        }\n      } else throw new ParserException(param.line, param.value + ' is not the name of an existing part')\n    }\n\n    // end of last phrase\n    if (bars.length > 0) part.phrases.push({ 'bars': bars })\n\n    return part\n  }\n\n  handleStructure (line, keyword, params) {\n    if (params.length < 2) throw new ParserException(line, keyword.toUpperCase() + ' expected at least 2 values (part name and lyrics), but found ' + params.length)\n    if (params.length % 2 !== 0) throw new ParserException(line, keyword.toUpperCase() + ' expected an even number of parameters (N x part name and lyrics), but found ' + params.length)\n    this.songcheat['structure'] = this.songcheat['structure'] || []\n\n    for (let pIndex = 0; pIndex < params.length; pIndex += 2) {\n      let param = params[pIndex]\n\n      let found = false\n      for (let part of this.songcheat['parts']) {\n        if (part.name === param.value) {\n          this.songcheat['structure'].push({ 'id': this.songcheat['structure'].length + 1, 'part': part.id, 'lyrics': params[pIndex + 1].value })\n          found = true\n          break\n        }\n      }\n\n      if (!found) throw new ParserException(param.line, param.value + '\" is not the name of an existing part')\n    }\n  }\n}\n\n/**\n * Public API\n */\n\nexport class Parser {\n  constructor () {\n    this.parser_ = new Parser_()\n  }\n\n  parse (songcheat) {\n    console.log('Parsing songcheat...')\n    return this.parser_.parse(songcheat)\n  }\n\n  getPrecedingKeyword (songcheat, line) {\n    return this.parser_.getPrecedingKeyword(songcheat, line)\n  }\n}\n","import { Utils } from './utils'\n\nexport class CompilerException {\n  constructor (message) {\n    this.message = message\n  }\n\n  toString () {\n    return 'Compiler error: ' + this.message\n  }\n}\n\nclass Compiler_ {\n  constructor (DEBUG) {\n    this.DEBUG = DEBUG\n  }\n\n  log () {\n    if (this.DEBUG > 0) console.log.apply(console, arguments)\n  }\n\n  compile (songcheat) {\n    // default values for optional properties\n    songcheat.mode = songcheat.mode || 'rt'\n    songcheat.lyricsMode = songcheat.lyricsMode || 's'\n    songcheat.barsPerLine = songcheat.barsPerLine || 4\n    songcheat.signature = songcheat.signature || {}\n    songcheat.signature.key = songcheat.signature.key || 'C'\n    songcheat.signature.time = songcheat.signature.time || { beatDuration: ':q', beatsPerBar: 4, symbol: '4/4' }\n    songcheat.lyricsUnit = songcheat.lyricsUnit || songcheat.signature.time.beatDuration\n    songcheat.chords = songcheat.chords || []\n    songcheat.rhythms = songcheat.rhythms || []\n    songcheat.parts = songcheat.parts || []\n\n    // deduce bar duration from signature\n    songcheat.barDuration = songcheat.signature.time.beatsPerBar * Utils.duration(songcheat.signature.time.beatDuration)\n\n    // resolve all id references (rhythms and chords)\n    this.resolveIds(songcheat)\n\n    // default structure if not specified : one unit for each (non sub) part\n    if (!songcheat.structure) {\n      songcheat.structure = []\n      for (let part of songcheat.parts) if (!part.sub) songcheat.structure.push({ 'part': part })\n    }\n\n    // give a name to each unit if not already set = name of part with automatic numbering\n    let unitsByPart = {}\n    let numberByPart = {}\n    for (let unit of songcheat.structure) unitsByPart[unit.part.id] = typeof unitsByPart[unit.part.id] === 'undefined' ? 1 : unitsByPart[unit.part.id] + 1\n    for (let unit of songcheat.structure) {\n      numberByPart[unit.part.id] = typeof numberByPart[unit.part.id] === 'undefined' ? 1 : numberByPart[unit.part.id] + 1\n      if (!unit.name) unit.name = unit.part.name + (unitsByPart[unit.part.id] > 1 ? ' ' + numberByPart[unit.part.id] : '')\n    }\n\n    // give a color to each part if not already set\n    let colors = ['red', '#06D6A0', 'blue', 'purple', 'orange', 'magenta']\n    let partIndex = 0\n    for (let part of songcheat.parts) { if (!part.color && !part.sub) part.color = colors[partIndex++ % colors.length] }\n\n    // validate and compile each rhythm\n    for (let rhythm of songcheat.rhythms) this.compileRhythm(rhythm, songcheat.signature.time.beatDuration)\n\n    for (let part of songcheat.parts) {\n      // compute a \"chordChanges\" property in each phrase\n      let phraseIndex = 0\n      for (let phrase of part.phrases) {\n        phrase.chordChanges = []\n        let lastChord = null\n        for (let bar of phrase.bars) lastChord = this.addChordChanges(bar, phrase.chordChanges, songcheat.barDuration, false, lastChord)\n\n        this.log('Phrase wise chord durations for phrase ' + part.name + '.' + (phraseIndex + 1))\n        for (let c of phrase.chordChanges) this.log('\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n\n        // compute a \"chordChanges\" property in each bar\n        let barIndex = 0\n        for (let bar of phrase.bars) {\n          bar.chordChanges = { 'bar': [], 'rhythm': [] }\n          for (let chordChangesMode of ['rhythm', 'bar']) this.addChordChanges(bar, bar.chordChanges[chordChangesMode], songcheat.barDuration, chordChangesMode === 'bar')\n\n          this.log('\\tRythm wise chord durations for bar ' + part.name + '.' + (phraseIndex + 1) + '.' + (barIndex + 1))\n          for (let c of bar.chordChanges['rhythm']) this.log('\\t\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n          this.log('\\tBar wise chord durations for bar ' + part.name + '.' + (phraseIndex + 1) + '.' + (barIndex + 1))\n          for (let c of bar.chordChanges['bar']) this.log('\\t\\t[' + c.chord.name + '] = ' + c.duration + ' units')\n\n          barIndex++\n        }\n\n        phraseIndex++\n      }\n\n      // compute duration of part\n      part.duration = 0\n      for (let phrase of part.phrases) { for (let bar of phrase.bars) part.duration += bar.rhythm.duration }\n    }\n\n    // fluid API\n    return songcheat\n  }\n\n  resolveIds (songcheat) {\n    let unitIndex = 0\n    if (songcheat.structure) {\n      for (let unit of songcheat.structure) {\n        if (!unit.part) throw new CompilerException('Part not defined for unit ' + (unitIndex + 1))\n\n        // resolve part id\n        let part = this.resolveId(songcheat.parts, unit.part)\n        if (!part) throw new CompilerException('Part ' + unit.part + ' not found')\n        unit.part = part\n\n        unitIndex++\n      }\n    }\n\n    if (songcheat.parts) {\n      for (let part of songcheat.parts) {\n        if (!part.phrases) throw new CompilerException('Phrases not defined for part \"' + part.name + '\"')\n        if (!(part.phrases instanceof Array)) throw new CompilerException('Phrases defined for part \"' + part.name + '\" must be an Array, found: ' + (typeof songcheat.parts.phrases))\n\n        let phraseIndex = 0\n        for (let phrase of part.phrases) {\n          let barIndex = 0\n          for (let bar of phrase.bars) {\n            if (!bar.rhythm) throw new CompilerException('Rhythm not defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' of ' + part.name)\n            if (!bar.chords) throw new CompilerException('Chords not defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' of ' + part.name)\n            if (!(bar.chords instanceof Array)) throw new CompilerException('Chords defined for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1) + ' must be an Array, found: ' + (typeof bar.chords))\n\n            // resolve rhythm id\n            let rhythm = this.resolveId(songcheat.rhythms, bar.rhythm)\n            if (!rhythm) throw new CompilerException('Rhythm ' + bar.rhythm + ' not found for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1))\n            bar.rhythm = rhythm\n\n            // resolved array of chord ids\n            let chords = []\n            for (let chordId of bar.chords) {\n              // resolve chord id\n              let chord = this.resolveId(songcheat.chords, chordId)\n              if (!chord) throw new CompilerException('Chord ' + chordId + ' not found for bar ' + (barIndex + 1) + ' of phrase ' + (phraseIndex + 1))\n              chords.push(chord)\n            }\n\n            bar.chords = chords\n            barIndex++\n          }\n\n          phraseIndex++\n        }\n      }\n    }\n  }\n\n  resolveId (collection, id) {\n    if (collection) { for (let i of collection) { if (i.id === id) return i } }\n    return null\n  }\n\n  compileRhythm (rhythm, initialNoteDuration) {\n    this.log('Compiling rhythm ' + rhythm.id + ' with score \"' + rhythm.score + '\"')\n\n    // default note duration, until changed\n    let noteDuration = initialNoteDuration\n\n    // take not of each placeholder's index, so we can later fetch the associated chord\n    rhythm.placeholdercount = 0\n\n    // for locating syntax errors in message\n    let position = 1\n    let lastToken = null\n\n    // compile the score string into an array of objects\n    rhythm.compiledScore = []\n    for (let token of rhythm.score.split(/((?::(?:w|h|q|8|16|32)d?)|\\(#\\)|T?\\s*\\([^(]*\\)[^()\\sT:]*)/)) {\n      if ((token = token.trim())) {\n        let match = null\n        if ((match = token.match(/^(:(?:w|h|q|8|16|32)d?)$/))) {\n          // duration: change note duration to use next\n          noteDuration = Utils.duration(match[1])\n        } else if ((match = token.match(/^\\(#\\)$/))) {\n          // rest\n          rhythm.compiledScore.push({ rest: true, duration: noteDuration, tied: false, strings: false, flags: {}, placeholderIndex: rhythm.placeholdercount++ })\n        } else if ((match = token.match(/^(T?)\\s*\\(([^(]*)\\)([^()\\s]*)$/))) {\n          // chord placeholder\n          let tied = match[1] === 'T'\n\n          // strings = between parentheses\n          let strings = match[2]\n          if (strings === '') strings = '*' // an empty string is a shortcut for \"*\"\n          if (strings === 'x') strings = '*x' // a x alone is a shortcut for \"*x\"\n          if (!strings.match(/^(?:(\\*x?)|((?:(?:B|B'|1|2|3|4|5|6)x?)+))$/)) throw new CompilerException('Invalid syntax found in chord placeholder: ' + strings)\n\n          // flags = after parentheses\n          let flagsString = match[3]\n          let flags = { stroke: null, accent: false, pm: false, fingering: null }\n          for (let flag of flagsString.split(/(dd?|uu?|>|PM|[pima]+)/)) {\n            if (flag.trim()) {\n              if (flag.match(/^(dd?|uu?)$/g)) {\n                // stroke mode\n                if (flags.fingering) throw new CompilerException('Fingering (' + flags.fingering + ') and stroke (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('Palm muting (PM) and stroke (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.stroke) throw new CompilerException('More than one stroke mode (d, u, dd, uu) defined for the chord placeholder: ' + token)\n                flags.stroke = flag\n              } else if (flag.match(/^[pima]+$/)) {\n                // PIMA fingering\n                if (flags.stroke) throw new CompilerException('Stroke (' + flags.stroke + ') and fingering (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('Palm muting (PM) and fingering (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.fingering) throw new CompilerException('More than one fingering (pima) defined for the chord placeholder: ' + token)\n                flags.fingering = flag\n              } else if (flag.match(/^PM$/)) {\n                // palm muting\n                if (flags.stroke) throw new CompilerException('Stroke (' + flags.stroke + ') and palm muting (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.fingering) throw new CompilerException('Fingering (' + flags.fingering + ') and palm muting (' + flag + ') cannot be both defined for the chord placeholder: ' + token)\n                if (flags.pm) throw new CompilerException('More than one palm muting (PM) defined for the chord placeholder: ' + token)\n                flags.pm = true\n              } else if (flag.match(/^>$/)) {\n                // accent\n                if (flags.accent) throw new CompilerException('More than one accent (>) defined for the same placeholder: ' + token)\n                flags.accent = true\n              } else throw new CompilerException('Invalid flag \"' + flag + '\" defined for chord placeholder \"' + token + '\"')\n            }\n          }\n\n          // add a note\n          rhythm.compiledScore.push({ rest: false, duration: noteDuration, tied: tied, strings: strings, flags: flags, placeholderIndex: rhythm.placeholdercount++ })\n        } else throw new CompilerException('Invalid token \"' + token + '\" in rhythm score definition at position ' + position + (lastToken ? ' (after \"' + lastToken + '\")' : ''))\n\n        lastToken = token\n      }\n\n      position += token.length\n    }\n\n    // compute total rhythm duration\n    rhythm.duration = 0\n    for (let o of rhythm.compiledScore) rhythm.duration += o.duration\n  }\n\n  addChordChanges (bar, chordChanges, barDuration, resetAtBars, lastChord) {\n    // ensure number of chords match number of placeholders in rhythm score, by repeating last chord\n    if (bar.chords.length < 1) throw new CompilerException('chords must contain at least 1 entry, but ' + bar.chords.length + ' were found')\n    while (bar.chords.length < bar.rhythm.placeholdercount) bar.chords.push(bar.chords[bar.chords.length - 1])\n\n    let offset = 0\n    for (let note of bar.rhythm.compiledScore) {\n      // get chord corresponding to the placeholder position\n      let chord = bar.chords[note.placeholderIndex]\n      if (!chord) throw new CompilerException('No chord found for placeholder ' + (note.placeholderIndex + 1))\n\n      // same chord as before and not a new bar: increment duration with this new note\n      if (lastChord === chord && offset % barDuration !== 0) chordChanges[chordChanges.length - 1].duration += note.duration\n\n      // chord changed: new duration starts with one note of the new chord\n      // unless requested to reset chords at bars, chord change will be hidden if still the same as before\n      else chordChanges.push({ chord: chord, duration: note.duration, hidden: lastChord === chord && !resetAtBars })\n\n      lastChord = chord\n      offset += note.duration\n    }\n\n    return lastChord\n  }\n}\n\n/**\n * Public API\n */\n\nexport class Compiler {\n  constructor (DEBUG) {\n    this.compiler_ = new Compiler_(DEBUG)\n  }\n\n  compile (songcheat) {\n    console.log(Utils.title('COMPILE SONGCHEAT'))\n    return this.compiler_.compile(JSON.parse(JSON.stringify(songcheat)))\n  }\n}\n","import { Utils } from './utils'\n\nlet MIN_LYRICS_BARLEN = 20 // minimum length of a bar lyrics (before reducing) - not really needed but produces a clearer view when maxConsecutiveSpaces set to 0 (and thus when displaying parts with partdisplay=full) since bars with no or little text will have the same length (unless there are really many chord changes...)\nlet LYRICS_SUM_DURATIONS = false // if true \"::\" is equivalent to \":h:\" (assuming lyrics unit is :q)\nlet KEEP_EMPTY_LINES = false\n\nexport class LyricsException {\n  constructor (message) {\n    this.message = message\n  }\n\n  toString () {\n    return 'Lyrics error: ' + this.message\n  }\n}\n\nclass Lyrics_ {\n  constructor (DEBUG) {\n    // DEBUG 1 forces showing . * | characters in unit text (even if showDots is passed false) as well as _ for groups that were automatically created when crossing a bar\n    this.DEBUG = DEBUG\n  }\n\n  log () {\n    if (this.DEBUG > 0) console.log.apply(console, arguments)\n  }\n\n  parseLyrics (unit, defaultCursorStep, barDuration) {\n    let warnings = []\n    let offset = 0\n\n    // remove DOS newlines\n    unit.lyrics = (unit.lyrics || '').replace(/\\r/g, '')\n\n    // split lyrics into word groups, split occurs at cursor forward instructions (colons, durations and bars)\n    unit.groups = []\n    for (let part of unit.lyrics.split(/((?::(?:w|h|q|8|16|32)d?)?:|\\|)/)) { // nb: split with capture groups only works in decent browsers, e.g. IE10+\n      let match = null\n      // move cursor forward by given or default step duration\n      if ((match = part.match(/(:(?:w|h|q|8|16|32)d?)?:/))) offset = this.registerGroup(unit, offset, match[1] ? Utils.duration(match[1]) : defaultCursorStep, barDuration)\n\n      // move cursor to begin of next bar\n      else if (part.match(/\\|/)) offset = this.registerGroup(unit, offset, barDuration - (offset % barDuration), barDuration)\n\n      // (non empty) word group (waiting for its duration)\n      else if (part.length > 0) unit.groups.push({ text: part, offset: offset, duration: 0 })\n    }\n\n    // simulate a final bar if last group still open (no duration), i.e. if lyrics do not end on a : or |\n    if (unit.groups.length && unit.groups[unit.groups.length - 1].duration === 0) offset = this.registerGroup(unit, offset, barDuration - (offset % barDuration), barDuration)\n\n    // get missing duration and complete with empty groups if needed (offset now contains the total duration of all groups)\n    let missingDuration = unit.part.duration - offset\n    this.log('[' + unit.name + '] Missing duration = ' + missingDuration + ' units (' + unit.part.duration + ' - ' + offset + ') = ' + (missingDuration / barDuration) + ' bars missing')\n    if (missingDuration < 0) warnings.push('Lyrics contain ' + Math.floor(-missingDuration / barDuration) + ' bar(s)' + (-missingDuration % barDuration ? ' and ' + Utils.durationcodes(-missingDuration % barDuration) : '') + ' in excess')\n    offset = this.registerGroup(unit, offset, missingDuration, barDuration)\n\n    for (let group of unit.groups) {\n      // compute length of group (in chars), adding 1 so the group having max density is not collated with next group\n      let groupLength = this.getGroupLength(group) + 1\n\n      // ensure the bar will always have the required minimal width\n      group.plen = Math.max(groupLength, Math.ceil(MIN_LYRICS_BARLEN * group.duration / barDuration))\n\n      // compute density of group based on the obtained length\n      group.p = group.plen / group.duration\n\n      // set bar true if group ends on a bar\n      group.bar = (group.offset + group.duration) % barDuration === 0\n\n      // initialize chord changes\n      group.chordChanges = { 'bar': [], 'rhythm': [], 'phrase': [] }\n    }\n\n    // compute maximum density across all groups\n    unit.pmax = 0\n    for (let group of unit.groups) unit.pmax = Math.max(unit.pmax, group.p)\n\n    // iterate on each phrase wise chord change and find the associated group\n    offset = 0\n    for (let phrase of unit.part.phrases) {\n      for (let chordDuration of phrase.chordChanges) {\n        // find closest group starting at or before chord offset\n        let group = null\n        for (let g of unit.groups) { if (g.offset <= offset) group = g }\n        if (!group) throw new Error('No closest group found for chord ' + chordDuration.chord.name + ' with offset ' + offset + ' units')\n\n        // register chord change in group\n        group.chordChanges['phrase'].push({ offset: offset, text: Utils.getChordDisplay(chordDuration) })\n\n        offset += chordDuration.duration\n      }\n    }\n\n    // iterate on each bar wise chord change and find the associated group\n    offset = { 'rhythm': 0, 'bar': 0 }\n    for (let phrase of unit.part.phrases) {\n      for (let bar of phrase.bars) {\n        for (let chordChangesMode of ['rhythm', 'bar']) {\n          for (let chordDuration of bar.chordChanges[chordChangesMode]) {\n            // find closest group starting at or before chord offset\n            let group = null\n            for (let g of unit.groups) { if (g.offset <= offset[chordChangesMode]) group = g }\n            if (!group) throw new Error('No closest group found for chord ' + chordDuration.chord.name + ' with offset ' + offset[chordChangesMode] + ' units')\n\n            // register chord change in group\n            group.chordChanges[chordChangesMode].push({ offset: offset[chordChangesMode], text: Utils.getChordDisplay(chordDuration) })\n\n            offset[chordChangesMode] += chordDuration.duration\n          }\n        }\n      }\n    }\n\n    // debug info\n    var debugText = 'Groups of unit [' + unit.name + ']:\\n'\n    var barIndex = 0\n    let zeroDuration = false\n    for (let group of unit.groups) {\n      debugText += '\\tBar ' + (barIndex + 1) + '\\t[' + group.text.replace(/\\n/g, '\\\\N') + ']:' + group.duration + ' (' + group.offset + ' - ' + (group.offset + group.duration) + ') L=' + this.getGroupLength(group) + \" L'=\" + group.plen + ' ρ=' + group.p.toFixed(2) + ' #Chord changes %bar= ' + group.chordChanges['bar'].length + ' %phrase= ' + group.chordChanges['phrase'].length\n      if (group.duration === 0) zeroDuration = true\n      if (group.bar) {\n        barIndex++\n        debugText += ' | '\n      }\n      debugText += '\\n'\n    }\n    debugText += 'ρ max = ' + unit.pmax.toFixed(2)\n    this.log(debugText)\n\n    if (zeroDuration) throw new Error('Detected group with 0 duration')\n\n    return warnings\n  }\n\n  getUnitText (unit, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    var unitText = ''\n\n    // concatenate lyrics groups, giving them a number of positions proprtional to their duration\n    var barIndex = 0\n    var groupIndex = 0\n    for (let group of unit.groups) {\n      // where and on how many positions will this group be displayed\n      group.position = [...unitText.replace(/\\n/g, '')].length\n      group.length = Math.ceil(group.duration * unit.pmax)\n\n      // an hyphen means a word has been cut in two, no need for a space before next group\n      // but if the final character should be a bar, then always count this extra character\n      let needFinalSpace = group.bar || !group.text.match(/-$/)\n\n      // if maxConsecutiveSpaces is set, set a maximum for the number of allowed positions if needed\n      let maxLength = null\n      if (maxConsecutiveSpaces > 0) maxLength = this.getGroupLength(group) + maxConsecutiveSpaces - (needFinalSpace ? 0 : 1)\n      if (maxLength) group.length = Math.min(group.length, maxLength)\n\n      // but if group has associated chords, we must have enough space for them (and this has priority over maxConsecutiveSpaces)\n      let minLength = group.bar ? 1 : 0 // 1 for the final bar sign if any\n      if (group.chordChanges[chordChangesMode]) { for (let i = 0; i < group.chordChanges[chordChangesMode].length; i++) minLength += group.chordChanges[chordChangesMode][i].text.length }\n      minLength = Math.max(this.getGroupLength(group) + (needFinalSpace ? 1 : 0), minLength)\n      group.length = Math.max(group.length, minLength)\n\n      // filler string used to reach that length (nb: filler will always have a length of at least 1)\n      let filler = Utils.spaces(group.length - this.getGroupLength(group), showDots || this.DEBUG ? '.' : ' ')\n\n      // replace last character of filler by a | if this is the end of a bar\n      filler = filler.replace(/(.)$/, group.bar ? (split > 0 && ((barIndex + 1) % split === 0) ? '|\\n' : '|') : (this.DEBUG ? '*' : '$1'))\n\n      // append filler to text, remove new lines if splitting at bars\n      var groupText = (split > 0 ? group.text.replace(/\\n/g, '') : group.text) + filler\n\n      this.log('[' + unit.name + '] Display group ' + (groupIndex + 1) + ' \"' + groupText.replace(/\\n/g, '\\\\N') + '\" on ' + group.length + ' chars (CEIL ' + (group.duration * unit.pmax).toFixed(2) + ' MIN ' + minLength + ' MAX ' + (maxLength || 'n/a') + ')')\n      unitText += groupText\n\n      groupIndex++\n      if (group.bar) barIndex++\n    }\n\n    // we weren't asked to add chords\n    if (!chordChangesMode) return unitText\n\n    // build chord inserts, based on bar or phrase wise changes, each with the text and position where to insert\n    let chordInserts = []\n    for (let group of unit.groups) {\n      let lengthStillToPlaceOnThisGroup = 0\n      let lengthYetPlacedOnThisGroup = 0\n\n      // compute length of all chord inserts\n      for (let chordChange of group.chordChanges[chordChangesMode]) lengthStillToPlaceOnThisGroup += chordChange.text.length\n\n      for (let chordChange of group.chordChanges[chordChangesMode]) {\n        // position of the chord will be the position of the group + length corresponding to offset delta\n        let positionDelta = Math.ceil(((chordChange.offset - group.offset) / group.duration) * group.length)\n        let positionDelta_ = positionDelta\n\n        // ensure that chord name will not cross end of group it belongs to (last char of group must not be overwritten either if it is a bar)\n        while (positionDelta + lengthStillToPlaceOnThisGroup > group.length - (group.bar ? 1 : 0)) { positionDelta-- }\n\n        // ensure that chords already there still have enough room\n        while (positionDelta - lengthYetPlacedOnThisGroup < 0) { positionDelta++ }\n\n        this.log('Closest group \"' + group.text.replace(/\\n/g, '\\\\n') + '\" with offset ' + group.offset + ' and position ' + group.position + ' found for ' + chordChange.text.trim() + ' with offset ' + chordChange.offset + ' units\\n\\tposition delta from group start = ' + positionDelta + ' chars (initially ' + positionDelta_ + ' chars)')\n        chordInserts.push({ text: chordChange.text, offset: chordChange.offset, position: group.position + positionDelta })\n\n        lengthYetPlacedOnThisGroup = positionDelta + chordChange.text.length\n        lengthStillToPlaceOnThisGroup -= chordChange.text.length\n      }\n    }\n\n    for (let chordInsert of chordInserts) this.log('[' + unit.name + '] Should insert ' + chordInsert.text + ' @ ' + chordInsert.offset + ' units / ' + chordInsert.position + ' chars')\n\n    // insert these chord inserts\n    let position = 0\n    let skip = 0\n    let unitText_ = unitText\n    let chordText = ''\n    unitText = ''\n    for (let char of unitText_) {\n      if (char === '\\n') {\n        unitText += '\\n'\n        chordText += '\\n'\n        skip = 0\n      } else {\n        for (let chordInsert of chordInserts) {\n          if (!chordInsert.inserted) {\n            if (chordInsert.position <= position) {\n              this.log('[' + unit.name + '] Inserting ' + chordInsert.text + ' @ ' + position + ' chars')\n              chordText += chordInsert.text\n              chordInsert.inserted = true\n              skip = chordInsert.text.length\n            }\n          }\n        }\n\n        position++\n\n        // add char to unit text, and corresponding space to chord text\n        // only bar symbols are added in chord text instead of unit text (if showing dots, then bars are displayed in both texts)\n        if (skip === 0) { chordText += char === '|' ? char : ' ' } else { skip-- }\n        unitText += char === '|' && !(showDots || this.DEBUG) ? ' ' : char\n      }\n    }\n\n    // and interlace the two strings\n    return Utils.interlace(chordText, unitText, null, KEEP_EMPTY_LINES)\n  }\n\n  registerGroup (unit, offset, step, barDuration) {\n    if (!barDuration) throw new Error('Invalid bar duration passed to registerGroup')\n\n    while (step > 0) {\n      // duration added to preceding group may never be more than what's left until end of bar\n      let addDuration = Math.min(step, barDuration - (offset % barDuration))\n\n      // create a new group if none or if preceding already got its duration\n      if (!unit.groups.length || (!LYRICS_SUM_DURATIONS && unit.groups[unit.groups.length - 1].duration > 0)) unit.groups.push({ text: '', offset: offset, duration: 0 })\n\n      // add this duration to preceding group (create it if needed)\n      unit.groups[unit.groups.length - 1].duration += addDuration\n      offset += addDuration\n      step -= addDuration\n\n      // step is going to cross end of bar: directly create a first empty group\n      if (step > 0) unit.groups.push({ text: this.DEBUG > 1 ? '_' : '', offset: offset, duration: 0 })\n    }\n\n    return offset\n  }\n\n  getGroupLength (group) {\n    // return the number of visible graphemes in group text\n    // - newlines are not counted\n    // - tabs will be converted to spaces and may thus count as 1\n    // - use spread operator to correctly count astral unicode symbols\n    return [...group.text.replace(/\\n/g, '')].length\n  }\n}\n\n/**\n * Public API\n */\n\nexport class Lyrics {\n  constructor (songcheat, DEBUG) {\n    this.lyrics_ = new Lyrics_(DEBUG)\n    this.songcheat = songcheat\n  }\n\n  parseLyrics (unit) {\n    console.log(Utils.title('PARSE LYRICS ' + unit.name))\n    return this.lyrics_.parseLyrics(unit, Utils.duration(this.songcheat.lyricsUnit), this.songcheat.barDuration)\n  }\n\n  getUnitText (unit, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    console.log(Utils.title(`GET LYRICS TEXT ${unit.name} (maxConsecutiveSpaces = ${maxConsecutiveSpaces}, split = ${split}, chordChangesMode = ${chordChangesMode}, showDots = ${showDots})`))\n    return this.lyrics_.getUnitText(unit, maxConsecutiveSpaces, split, chordChangesMode, showDots)\n  }\n\n  getPartText (part, maxConsecutiveSpaces, split, chordChangesMode, showDots) {\n    // dummy unit with no lyrics\n    let unit = { name: part.name, part: part }\n\n    console.log(Utils.title('PARSE PART LYRICS ' + unit.name))\n    this.lyrics_.parseLyrics(unit, Utils.duration(this.songcheat.lyricsUnit), this.songcheat.barDuration)\n\n    console.log(Utils.title(`GET PART LYRICS TEXT ${unit.name} (maxConsecutiveSpaces = ${maxConsecutiveSpaces}, split = ${split}, chordChangesMode = ${chordChangesMode}, showDots = ${showDots})`))\n    return this.lyrics_.getUnitText(unit, maxConsecutiveSpaces, split, chordChangesMode, showDots)\n  }\n}\n","import { Utils } from './utils'\n\nexport class ChordPixException {\n  constructor (message) {\n    this.message = message\n  }\n\n  toString () {\n    return 'Chordpix error: ' + this.message\n  }\n}\n\nexport class ChordPix {\n  static parse (url) {\n    try {\n      // validate and explode url at slashes\n      if (!url.match(/https?:\\/\\/chordpix.com\\/i\\/[0-9]+\\/6\\/[0-9]+\\/[0-9]+\\/[x0-6]{6}\\/[T0-4]{6}\\/(-|[0-9]+)\\/.+\\..+/)) throw new ChordPixException('Invalid ChordPix image URL')\n      let parts = url.split(/\\//)\n\n      // get chord name replacing ♯ with # and ♭ with b so that chord names can be easily typed in songcheat text file\n      let name = parts[11].split('.')[0].replace(/♯/g, '#').replace(/♭/g, 'b')\n\n      // get starting fret\n      let startingFret = parseInt(parts[7], 10)\n\n      // get absolute barred fret (single char) (\"-\" kept as is)\n      let barredFret = parts[10] === '-' ? parts[10] : Utils.rel2abs(parseInt(parts[10], 10), startingFret)\n\n      // build an absolute tablature (single char x6) (\"x\" kept as is)\n      let tablature = ''\n      for (let char of parts[8]) tablature += char === 'x' ? char : Utils.rel2abs(parseInt(char, 10), startingFret)\n\n      return {\n        name: name,\n        tablature: tablature,\n        fingering: parts[9] + '/' + barredFret,\n        comment: ''\n      }\n    } catch (e) {\n      throw new ChordPixException('[URL ' + url + '] ' + e.message)\n    }\n  }\n\n  static url (chord, chordWidth) {\n    try {\n      // check tablature is valid\n      if (typeof chord.tablature !== 'string') throw new Error('chord.tablature must be a string')\n      if (chord.tablature.length !== 6) throw new Error('chord.tablature must be exactly 6 characters long (one for each guitar string)')\n      if (!chord.tablature.match(/^[x0-9A-Z]{6}$/)) throw new Error('chord.tablature must contain only digits and capital letters (representing a fret number), or \"x\" (for mute)')\n\n      // check fingering is valid\n      if (typeof chord.fingering !== 'string') throw new Error('chord.fingering must be a string')\n      if (chord.fingering.length === 6) chord.fingering += '/-'\n      if (chord.fingering.length !== 8) throw new Error('chord.fingering must be exactly 6 or 8 characters long (....../.)')\n      if (!chord.fingering.match(/^[PT01234]{6}.*$/)) throw new Error('the first 6 characters of chord.fingering can only be P,T,1,2,3,4 or 0 (each character represents a finger)')\n      if (!chord.fingering.match(/^[PT01234]{6}\\/[-0-9A-Z]$/)) throw new Error('the last 2 characters of chord.fingering must be a \"/\" followed by a digit or capital letter (representing the number of the barred fret) or \"-\" if there is no barred fret')\n\n      // convert 6 chars into 6 integers (null for x)\n      let frets = []\n      for (let char of chord.tablature) frets.push(char === 'x' ? null : Utils.char2fret(char))\n\n      // get max and min fret (excluding null and 0), use 1 if chord has no frets at all\n      let minFret = frets.filter(x => x).length > 0 ? Math.min(...frets.filter(x => x)) : 1\n      let maxFret = frets.filter(x => x).length > 0 ? Math.max(...frets.filter(x => x)) : 1\n\n      // get number of frets to display on diagram (with minimum of 4)\n      let nbFrets = Math.max(4, maxFret + 1 - minFret)\n\n      // get first fret displayed in the diagram: start at 1 if possible otherwise start at minFret\n      let startingFret = maxFret + 1 - nbFrets <= 1 ? 1 : minFret\n\n      // get relative barred fret (\"-\" kept as is)\n      let fingering = chord.fingering.split('/')\n      if (fingering[1] && fingering[1] !== '-') fingering[1] = Utils.abs2rel(fingering[1], startingFret)\n\n      // build a relative tablature (\"0\" and \"x\" kept as is)\n      let relTablature = ''\n      for (let char of chord.tablature) relTablature += char === 'x' || char === '0' ? char : Utils.abs2rel(char, startingFret)\n\n      // use nice ♯ and ♭ in diagram (replace only last occurence)\n      let name = chord.inline ? ' ' : (chord.name ? chord.name.replace(/#([^#]*)$/, '♯$1').replace(/b([^b]*)$/, '♭$1') : chord.tablature)\n\n      // build final url\n      return 'http://chordpix.com/i/' + (chordWidth || 450) + '/6/' + nbFrets + '/' + startingFret + '/' + relTablature + '/' + fingering.join('/') + '/' + name + '.png'\n    } catch (e) {\n      throw new ChordPixException('[Chord ' + JSON.stringify(chord) + '] ' + e.message)\n    }\n  }\n}\n","import { Utils } from './utils'\n\nlet DEBUG = 0\n\nexport class VexTabException {\n  constructor (message) {\n    this.message = message\n  }\n\n  toString () {\n    return 'VexTab error: ' + this.message\n  }\n}\n\nexport class VexTab {\n  // build VexTab chord notation\n  static Chord2VexTab (chord, strings, transpose) {\n    var vextabchord = []\n    for (let o of Utils.chordStrings(chord, strings)) {\n      vextabchord.push((o.mute ? 'X' : transpose + o.fret) + '/' + o.string)\n    }\n    return '(' + vextabchord.join('.') + ')'\n  }\n\n  static Note2VexTab (note, strokes, accents) {\n    let vextab = ''\n\n    // rest with given duration\n    if (note.rest) vextab += Utils.durationcode(note.duration) + '#5#'\n\n    else {\n      // note duration, slashed if no chord given\n      vextab += note.chord ? Utils.durationcode(note.duration) : Utils.durationcode(note.duration).replace(/(:(?:w|h|q|8|16|32))(d?)/g, '$1S$2')\n\n      // if tied note\n      if (note.tied) vextab += 'T'\n\n      // chord or dummy note (for slash notation)\n      vextab += !note.chord ? '(4/3)' : VexTab.Chord2VexTab(note.chord, note.strings, 0) // do not transpose with capo: chords are tabbed exactly as their diagrm says (author chooses to use capo'd chords or not)\n\n      // stroke flag d or u (dd and uu are not built-in in vextab and are handled later through text2VexTab)\n      if (strokes && note.flags.stroke && note.flags.stroke.length === 1) vextab += note.flags.stroke\n\n      // accent (put on top)\n      if (accents && note.flags.accent) vextab += '$.a>/' + accents + '.$'\n    }\n\n    return vextab\n  }\n\n  static Notes2Stave (songcheat, offset, notes, strokes, accents, subtitle, hs, notation, tablature) {\n    let vextab = ''\n    let barDuration = songcheat.barDuration\n\n    console.log('Drawing ' + (notation ? 'notation ' : '') + (tablature ? 'tablature ' : '') + 'stave with ' + notes.length + ' notes')\n\n    // start new stave with signature\n    vextab += '\\ntabstave notation=' + (notation ? 'true' : 'false') + ' tablature=' + (tablature ? 'true' : 'false') + '\\n'\n    vextab += 'tuning=' + songcheat.tuning + ' key=' + songcheat.signature.key + ' time=' + songcheat.signature.time.symbol + '\\n'\n\n    // add subtitle if first bar\n    if (subtitle && offset === 0) vextab += 'text .' + hs + ',.font=Arial-10-bold,[' + subtitle + ']\\n'\n\n    vextab += 'notes '\n\n    // initial bar line if needed (double if first bar)\n    if (offset % barDuration === 0) vextab += (offset === 0 ? '=||' : '|')\n\n    // add each note, followed by a bar or phrase sign if needed\n    for (let note of notes) {\n      vextab += VexTab.Note2VexTab(note, strokes, accents)\n      offset += note.duration\n      if (note.lastInPhrase && offset % barDuration !== 0) console.warn('Phrase matches no bar (' + Utils.durationcodes(barDuration - offset % barDuration) + ' away)')\n      if (offset % barDuration === 0) vextab += note.lastInPhrase ? '=||' : '|'\n    }\n\n    return vextab + '\\n'\n  }\n\n  static Text2VexTab (textGroups, barDuration, offset, staveDuration, h, font) {\n    let text = ''\n\n    // for groups that start within our range\n    for (let group of textGroups) {\n      if (group.offset >= offset + staveDuration) break\n      if (group.offset >= offset) {\n        let line = 'text ++,.' + h + ',.font=' + font\n\n        // initial bar line if needed\n        if (offset % barDuration === 0) line += ',|'\n\n        // add empty text groups to fill the gap between start of stave and start of group\n        let gap = group.offset - offset\n        while (gap > 0) {\n          // gap duration may never be more than what's left until end of bar\n          let d = Math.min(gap, barDuration - (offset % barDuration))\n          for (let code of Utils.durationcodes(d)) line += ',' + code + ', '\n          if ((offset + d) % barDuration === 0) line += ',|'\n\n          // continue with remaining gap\n          gap -= d\n        }\n\n        // add actual text group on all available duration until end of stave (or more precisely the largest duration code which is <= available duration)\n        let available = offset + staveDuration - group.offset\n        for (let code of Utils.durationcodes(available)) { line += ',' + code + ',' + (group.text.replace(/\\n/g, '') || ' '); break }\n\n        // remove trailing spaces and comma: vextab does not allow to finish on an empty word group\n        text += line.replace(/[ ,]+$/, '') + '\\n'\n      }\n    }\n\n    return text\n  }\n\n  static Songcheat2VexTab (songcheat) {\n    let vextab = ''\n    let unitIndex = 0\n    for (let unit of songcheat.structure) {\n      if (typeof songcheat.showUnitIndex === 'undefined' || songcheat.showUnitIndex === null || songcheat.showUnitIndex === unitIndex) {\n        vextab += VexTab.Unit2VexTab(songcheat, unit, unitIndex) + '\\n'\n      }\n      unitIndex++\n    }\n    return vextab\n  }\n\n  static Unit2VexTab (songcheat, unit, unitIndex) {\n    let stems = songcheat.mode.indexOf('s') >= 0\n    let showLyrics = songcheat.lyricsMode === 's'\n    let barDuration = songcheat.barDuration\n\n    let vextab = 'options tempo=' + songcheat.signature.tempo + ' player=false tab-stems=' + (stems ? 'true' : 'false') + ' tab-stem-direction=up\\n'\n    unitIndex = unitIndex || 0\n\n    let staveDuration = 0\n    let notes = []\n    let notesSlashed = []\n\n    console.log('VexTabbing unit ' + (unitIndex + 1) + ' \"' + unit.name + '\"')\n\n    // space before first unit and between units\n    vextab += 'options space=' + (unitIndex > 0 && songcheat.showUnitIndex === null ? 50 : 20) + '\\n'\n\n    // get lyrics word groups\n    let lyricsGroups = []\n    if (unit.groups) for (let group of unit.groups) lyricsGroups.push({ offset: group.offset, text: group.text + (DEBUG ? '/' + group.duration : '') })\n\n    // get rhythm wise chord changes (same as ascii lyrics)\n    let offset = 0\n    let chordGroups = []\n    for (let phrase of unit.part.phrases) {\n      for (let bar of phrase.bars) {\n        for (let chordChange of bar.chordChanges['rhythm']) {\n          chordGroups.push({ offset: offset, text: Utils.getChordDisplay(chordChange) + (DEBUG ? '/' + chordChange.duration : '') })\n          offset += chordChange.duration\n        }\n      }\n    }\n\n    // get PIMA and dd/uu word groups\n    offset = 0\n    let fingeringGroups = []\n    for (let phrase of unit.part.phrases) {\n      for (let bar of phrase.bars) {\n        for (let note of bar.rhythm.compiledScore) {\n          if (note.flags.fingering) fingeringGroups.push({ offset: offset, text: note.flags.fingering.toLowerCase() })\n          else if (note.flags.stroke && note.flags.stroke.length === 2) fingeringGroups.push({ offset: offset, text: note.flags.stroke === 'dd' ? '⤋' : '⤊' })\n          offset += note.duration\n        }\n      }\n    }\n\n    // get PM word groups\n    offset = 0\n    let pmGroups = []\n    for (let phrase of unit.part.phrases) {\n      for (let bar of phrase.bars) {\n        for (let note of bar.rhythm.compiledScore) {\n          if (note.flags.pm) pmGroups.push({ offset: offset, text: 'PM' })\n          offset += note.duration\n        }\n      }\n    }\n\n    // for each phrase in unit\n    offset = 0\n    let phraseIndex = 0\n    for (let phrase of unit.part.phrases) {\n      console.log('\\tphrase ' + (phraseIndex + 1))\n      let lastPhraseInPart = phraseIndex === unit.part.phrases.length - 1\n\n      // for each bar in phrase\n      let barIndex = 0\n      for (let bar of phrase.bars) {\n        console.log('\\t\\tbar ' + (barIndex + 1))\n        let lastBarInPhrase = barIndex === phrase.bars.length - 1\n\n        // for each note in rhythm\n        let noteIndex = 0\n        for (let note of bar.rhythm.compiledScore) {\n          // note with no chord set (slash)\n          let phraseNote = JSON.parse(JSON.stringify(note))\n          phraseNote.lastInPhrase = lastBarInPhrase && noteIndex === bar.rhythm.compiledScore.length - 1\n          notesSlashed.push(phraseNote)\n\n          // register note with corresponding chord\n          let chordedPhraseNote = JSON.parse(JSON.stringify(phraseNote))\n          chordedPhraseNote.chord = bar.chords[note.placeholderIndex]\n          if (!chordedPhraseNote.chord) throw new VexTabException('No chord found for placeholder ' + (note.placeholderIndex + 1))\n          notes.push(chordedPhraseNote)\n\n          // draw staves when we have completed barsPerLine bars or if the part is done\n          staveDuration += note.duration\n          let partDone = lastPhraseInPart && phraseNote.lastInPhrase\n          if (staveDuration >= songcheat.barsPerLine * barDuration || partDone) {\n            console.log((partDone ? 'EOP' : 'EOL') + ' @ ' + staveDuration + ' units: drawing ' + notes.length + ' notes stave' + (songcheat.mode.length > 1 ? 's' : ''))\n\n            // notation: shows unit.name, chords, accents, stems (slashes) and lyrics\n            // if tablature is not displayed, it also shows strokes/fingering\n            // it never shows PM and frets\n            if (songcheat.mode.indexOf('r') >= 0) {\n              let strokes = songcheat.mode.indexOf('t') < 0\n              vextab += VexTab.Notes2Stave(songcheat, offset, notesSlashed, strokes, 'top', unit.name, -1, true, false)\n              if (strokes && fingeringGroups.length > 0) vextab += VexTab.Text2VexTab(fingeringGroups, barDuration, offset, staveDuration, 11, 'Arial-9-normal') // PIMA on same line as strokes\n              if (showLyrics && lyricsGroups.length > 0) vextab += VexTab.Text2VexTab(lyricsGroups, barDuration, offset, staveDuration, strokes ? 13 : 11, 'Times-11-italic')\n              if (chordGroups.length > 0) vextab += VexTab.Text2VexTab(chordGroups, barDuration, offset, staveDuration, 2, 'Arial-10-normal')\n              vextab += 'options space=' + (strokes ? 40 : 20) + '\\n'\n            }\n\n            // tablature: shows PM, frets and strokes/fingering\n            // if notation is not displayed, it also shows unit.name, chords, lyrics and stems (if mode \"ts\")\n            // it never shows accents\n            if (songcheat.mode.indexOf('t') >= 0) {\n              if (stems) vextab += 'options space=' + 30 + '\\n'\n              vextab += VexTab.Notes2Stave(songcheat, offset, notes, true, false, songcheat.mode.indexOf('r') < 0 ? unit.name : false, stems ? -3 : -1, false, true)\n              if (fingeringGroups.length > 0) vextab += VexTab.Text2VexTab(fingeringGroups, barDuration, offset, staveDuration, 10, 'Arial-9-normal') // PIMA on same line as strokes\n              if (pmGroups.length > 0) vextab += VexTab.Text2VexTab(pmGroups, barDuration, offset, staveDuration, 10, 'Arial-9-normal') // PM on same line as strokes\n              if (songcheat.mode.indexOf('r') < 0 && showLyrics && lyricsGroups.length > 0) vextab += VexTab.Text2VexTab(lyricsGroups, barDuration, offset, staveDuration, 12, 'Times-11-italic')\n              if (songcheat.mode.indexOf('r') < 0 && chordGroups.length > 0) vextab += VexTab.Text2VexTab(chordGroups, barDuration, offset, staveDuration, stems ? -1 : 1, 'Arial-10-normal')\n              vextab += 'options space=' + (songcheat.mode.indexOf('r') ? 30 : 10) + '\\n'\n            }\n\n            // space after staves\n            vextab += 'options space=' + 10 + '\\n'\n\n            // increment offset\n            offset += staveDuration\n\n            // clear workspace\n            notes = []\n            notesSlashed = []\n            staveDuration = 0\n          }\n\n          // next note in rhythm\n          noteIndex++\n        }\n\n        // next bar in phrase\n        barIndex++\n      }\n\n      // next phrase in part\n      phraseIndex++\n    }\n\n    return vextab\n  }\n}\n","module.exports = {\n  \"Bass\": require(\"./Bass.json\"),\n  \"BassAmp360\": require(\"./BassAmp360.json\"),\n  \"BassFuzz\": require(\"./BassFuzz.json\"),\n  \"BassFuzz2\": require(\"./BassFuzz2.json\"),\n  \"BassSubDub\": require(\"./BassSubDub.json\"),\n  \"BassSubDub2\": require(\"./BassSubDub2.json\"),\n  \"Brass\": require(\"./Brass.json\"),\n  \"BritBlues\": require(\"./BritBlues.json\"),\n  \"BritBluesDriven\": require(\"./BritBluesDriven.json\"),\n  \"Buzzy1\": require(\"./Buzzy1.json\"),\n  \"Buzzy2\": require(\"./Buzzy2.json\"),\n  \"Celeste\": require(\"./Celeste.json\"),\n  \"ChorusStrings\": require(\"./ChorusStrings.json\"),\n  \"Dissonant1\": require(\"./Dissonant1.json\"),\n  \"Dissonant2\": require(\"./Dissonant2.json\"),\n  \"DissonantPiano\": require(\"./DissonantPiano.json\"),\n  \"DroppedSaw\": require(\"./DroppedSaw.json\"),\n  \"DroppedSquare\": require(\"./DroppedSquare.json\"),\n  \"DynaEPBright\": require(\"./DynaEPBright.json\"),\n  \"DynaEPMed\": require(\"./DynaEPMed.json\"),\n  \"Ethnic33\": require(\"./Ethnic33.json\"),\n  \"Full1\": require(\"./Full1.json\"),\n  \"Full2\": require(\"./Full2.json\"),\n  \"GuitarFuzz\": require(\"./GuitarFuzz.json\"),\n  \"Harsh\": require(\"./Harsh.json\"),\n  \"MklHard\": require(\"./MklHard.json\"),\n  \"Noise\": require(\"./Noise.json\"),\n  \"Organ2\": require(\"./Organ2.json\"),\n  \"Organ3\": require(\"./Organ3.json\"),\n  \"PhonemeAh\": require(\"./PhonemeAh.json\"),\n  \"PhonemeBah\": require(\"./PhonemeBah.json\"),\n  \"PhonemeEe\": require(\"./PhonemeEe.json\"),\n  \"PhonemeO\": require(\"./PhonemeO.json\"),\n  \"PhonemeOoh\": require(\"./PhonemeOoh.json\"),\n  \"PhonemePopAhhhs\": require(\"./PhonemePopAhhhs.json\"),\n  \"Piano\": require(\"./Piano.json\"),\n  \"Pulse\": require(\"./Pulse.json\"),\n  \"PutneyWavering\": require(\"./PutneyWavering.json\"),\n  \"Saw\": require(\"./Saw.json\"),\n  \"Square\": require(\"./Square.json\"),\n  \"TB303Square\": require(\"./TB303Square.json\"),\n  \"Throaty\": require(\"./Throaty.json\"),\n  \"Triangle\": require(\"./Triangle.json\"),\n  \"Trombone\": require(\"./Trombone.json\"),\n  \"TwelveOpTines\": require(\"./TwelveOpTines.json\"),\n  \"TwelveStringGuitar1\": require(\"./TwelveStringGuitar1.json\"),\n  \"WarmSaw\": require(\"./WarmSaw.json\"),\n  \"WarmSquare\": require(\"./WarmSquare.json\"),\n  \"WarmTriangle\": require(\"./WarmTriangle.json\"),\n  \"Wurlitzer\": require(\"./Wurlitzer.json\"),\n  \"Wurlitzer2\": require(\"./Wurlitzer2.json\")\n}\n","import { Utils } from './utils'\nimport waveTables from '@mohayonao/wave-tables'\n\nexport class Player {\n  constructor (audioCtx, notes, config) {\n    this.MODE_RHYTHM = 1 // play beeps only\n    this.MODE_BASS = 2 // when there is a strummed chord, play only bass (no effect onindividual strings)\n    this.MODE_CHORDS = 3 // play actual strummed chords\n\n    config = config || {}\n    config.signature = config.signature || {}\n    config.signature.time = config.signature.time || {}\n\n    // audio context\n    this.audioCtx = audioCtx\n\n    // notes to beep\n    this.notes = notes\n\n    // config: loop or not and callback at end if no loop\n    this.loop = config.loop || false\n    this.onDone = config.onDone || null\n    this.onCountdown = config.onCountdown || function () {}\n\n    // config: capo and signature (tempo, time, shuffle)\n    this.capo = config.capo || 0\n    this.tempo = config.signature.tempo || 100\n    this.beatsPerBar = config.signature.time.beatsPerBar || 4\n    this.beatDuration = config.signature.time.beatDuration || ':q'\n    this.shuffle = config.signature.shuffle ? Utils.duration(config.signature.shuffle) : false\n\n    // tuning, defaults to standard tuning\n    this.tuning = config.tuning || [329.63, // E4\n      246.94, // B3\n      196.00, // G3\n      146.83, // D3\n      110.00, // A2\n      82.41\n    ] // E2\n\n    // play control\n    this.stopped = true\n    this.paused = false\n\n    // initialize to defaults\n    this.speed(100)\n    this.setDisto(0)\n    this.setVolume(50)\n    this.setMode(this.MODE_CHORDS)\n    this.setType(config.type || 'Piano')\n  }\n\n  makeDistortionCurve (amount) {\n    let k = typeof amount === 'number' ? amount : 50\n    let nSamples = 44100\n    let curve = new Float32Array(nSamples)\n    let deg = Math.PI / 180\n    for (let i = 0; i < nSamples; ++i) {\n      let x = i * 2 / nSamples - 1\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x))\n    }\n    return curve\n  }\n\n  /**\n   * duration of the tone in milliseconds\n   * frequency of the tone in hertz\n   * volume of the tone between 0 and 1\n   * type of tone. Possible values are sine, square, sawtooth, triangle, and custom.\n   * callback to use on end of tone\n   */\n  sound (time, duration, frequency, volume, distortion, type, onended) {\n    let audioCtx = this.audioCtx\n    let gainNode = audioCtx.createGain()\n    gainNode.gain.value = volume\n\n    if (distortion) {\n      let distoNode = audioCtx.createWaveShaper()\n      distoNode.curve = this.makeDistortionCurve(parseInt(distortion, 10))\n      distoNode.oversample = '4x'\n      distoNode.connect(audioCtx.destination)\n      gainNode.connect(distoNode)\n    } else gainNode.connect(audioCtx.destination)\n\n    let oscillator = audioCtx.createOscillator()\n    oscillator.connect(gainNode)\n\n    oscillator.frequency.value = frequency\n    oscillator.onended = onended\n\n    // type can be a periodic wave or a standard oscillator type\n    if (waveTables[type]) oscillator.setPeriodicWave(audioCtx.createPeriodicWave(waveTables[type].real, waveTables[type].imag))\n    else oscillator.type = type\n\n    oscillator.start(time)\n    oscillator.stop(time + duration)\n  }\n\n  chord2frequencies (chord, strings, transpose) {\n    let freqs = []\n    for (let o of Utils.chordStrings(chord, strings)) {\n      if (!o.mute) freqs.push(this.tuning[o.string - 1] * Math.pow(Math.pow(2, 1 / 12), transpose + o.fret))\n    }\n    return freqs\n  }\n\n  ms_ (note) {\n    // base duration of note\n    let ms_ = note.duration * this.msPerUnit\n\n    // change duration proportions for shuffled notes\n    if (this.shuffle && note.duration === this.shuffle) {\n      if (note.offset % (2 * this.shuffle) === 0) ms_ *= 1.3333\n      else ms_ *= 0.6667\n    }\n\n    return ms_\n  }\n\n  note_ (time) {\n    let audioCtx = this.audioCtx\n    var self = this\n\n    // stop or pause requested\n    if (this.stopped || this.paused) {\n      this.donePlaying = true\n      return true\n    }\n\n    // get note to play\n    if (!this.notes) return false\n    let note = this.notes[this.noteIndex]\n    let nextPlayedNote = this.notes[this.noteIndex + 1]\n    if (!note) return false\n\n    // some shortcut vars based on note properties\n    let isBar = note.offset === 0\n    let isBeat = note.offset % Utils.duration(this.beatDuration) === 0\n    let isUp = note.flags.stroke === 'u' || note.flags.stroke === 'uu'\n    let isDown = note.flags.stroke === 'd' || note.flags.stroke === 'dd'\n    let isArpeggiated = note.flags.stroke && note.flags.stroke.length === 2\n\n    // set next note to play\n    this.noteIndex = (this.noteIndex + 1) % this.notes.length\n\n    // jump to next note if skipped tied note\n    if (note.skip) {\n      // info message, scheduled to display at the given time\n      let message = (isBar ? '\\n|\\t' : '\\t') + ('[SKIP]').padEnd(10, ' ') + (note.offset + Utils.durationcode(note.duration)).padEnd(5, ' ') + ' ' + (isBar ? ' [BAR]' : (isBeat ? ' [BEAT]' : ''))\n      setTimeout(function () { console.info(message) }, Math.max(0, time - audioCtx.currentTime) * 1000)\n\n      self.note_(time)\n      return\n    }\n\n    // get number of ms that this note should last\n    let ms = this.ms_(note)\n\n    // consume next ties note(s) as long as they are the same\n    let noteFreqs = note.chord && note.strings ? this.chord2frequencies(note.chord, note.strings, this.capo) : null\n    for (let nextNoteIndex = this.noteIndex; nextNoteIndex < this.notes.length; nextNoteIndex++) {\n      let nextNote = this.notes[nextNoteIndex]\n      if (!nextNote.tied) break\n\n      // get frequencies for chord notes\n      // TODO: if no chord (i.e. we are playing a pure rhythm), consider note is the same only if type T (i.e. not for types sbhpt)\n      let nextNoteFreqs = nextNote.chord && nextNote.strings ? this.chord2frequencies(nextNote.chord, nextNote.strings, this.capo) : null\n      if (!Utils.arraysEqual(noteFreqs, nextNoteFreqs)) break\n\n      nextNote.skip = true\n      nextPlayedNote = this.notes[nextNoteIndex + 1]\n      ms += this.ms_(nextNote)\n    }\n\n    // beep or chord volume\n    let volume = 0.25 * (this.volume / 100.0) // base gain from 0 to 1.5 according to user volume slider\n    if (note.flags.accent) volume *= 1.5 // increase gain by 50% if accent\n    if (note.rest) volume = 0 // silence if rest\n\n    // beep frequency\n    let freqs = [440 * 1.5]\n    if (isBar) freqs[0] *= 2 // octave\n    else if (isBeat) freqs[0] *= 1.5 // quinte\n\n    // get note chord, ignored in rhythm mode\n    let chord = this.mode === this.MODE_RHYTHM ? null : note.chord\n\n    // beep duration is 5 ms\n    // actual notes are played for the whole duration if next played (i.e. not skipped) note is tied otherwise for 90%\n    let beepduration = chord ? (nextPlayedNote && nextPlayedNote.tied ? ms : ms * 0.90) : Math.min(ms, 5)\n\n    // for rhythm type is always square and no distortion, for actual notes use the user-defined settings\n    let type = chord ? this.type : 'square'\n    let distortion = chord ? this.distortion : null\n\n    // played chord (for a rest, chord is set but strings is not)\n    if (chord && note.strings) {\n      // get frequencies for chord notes\n      freqs = this.chord2frequencies(chord, this.mode === this.MODE_BASS ? note.strings.replace(/\\*/g, 'B') : note.strings, this.capo)\n\n      // reverse string order if up stroke\n      if (isUp) freqs = freqs.reverse()\n\n      // adjust volume according to number of simultaneous notes\n      // volume = volume / (2.0 * Math.sqrt(freqs.length));\n      // UPDATE: no, bass among chords is otherwise louder than it should\n      // UPDATE: instead increase volume only if BASS ONLY mode\n      if (this.mode === this.MODE_BASS) volume *= 3\n    }\n\n    // info message, scheduled to display at the same time as oscillator will play our sound\n    let what = note.rest ? 'REST' : (chord ? chord.name + '/' + freqs.length + ' ' + (isDown ? 'B' : '') + (isUp ? 'H' : '') : 'BEEP')\n    let message = (isBar ? '\\n|\\t' : '\\t') + ('[' + what + ']').padEnd(15, ' ') + (note.offset + Utils.durationcode(note.duration)).padEnd(5, ' ') + ' ' + ms.toFixed(0) + ' ms [VOL ' + (volume * 100) + ']' + (note.tied ? ' [TIED]' : '') + (isBar ? ' [BAR]' : (isBeat ? ' [BEAT]' : '')) + (note.flags.accent ? ' [ACCENT]' : '')\n    setTimeout(function () { console.info(message) }, Math.max(0, time - audioCtx.currentTime) * 1000)\n\n    // play beep (1 note) or chord (N notes)\n    let fIndex = 0\n    let delay = 0\n    for (let frequency of freqs) {\n      // handle next node when last note has done playing\n      this.sound(time + delay / 1000.0, (beepduration - delay) / 1000.0, frequency, volume, distortion, type, fIndex < freqs.length - 1 ? null : function () {\n        // back on first note: stop and callback if not loop\n        if (self.noteIndex === 0 && !self.loop) {\n          self.stop()\n          if (self.onDone) self.onDone()\n        } else self.note_(time + ms / 1000.0)\n      })\n\n      // simulate the fact that strings hit first will sound first (but they'll all stop at the same time, hence substrating delay from beepduration above)\n      // when a chord is arpeggiated, take 3/4 of available duration to hit strings the one after the other\n      delay += (isArpeggiated ? (beepduration * 0.75) / freqs.length : (note.tied ? 0 : 10))\n\n      // simulate the fact that first hit strings will sound louder\n      volume *= 0.95\n\n      fIndex++\n    }\n  }\n\n  stop () {\n    this.stopped = true\n    this.paused = false\n    if (this.cd) {\n      clearTimeout(this.cd)\n      this.onCountdown()\n    }\n  }\n\n  pause () {\n    this.stopped = false\n    this.paused = true\n    if (this.cd) {\n      clearTimeout(this.cd)\n      this.onCountdown()\n    }\n  }\n\n  play (countdown) {\n    let audioCtx = this.audioCtx\n    let self = this\n\n    if (!this.paused) this.noteIndex = 0\n    this.stopped = false\n    this.paused = false\n\n    this.onCountdown(countdown)\n    if (countdown) this.cd = setTimeout(function () { self.play(countdown - 1) }, 1000)\n    else {\n      // compute for each note the offset wrt the bar it's contained in\n      let offset = 0\n      for (let note of this.notes) {\n        note.offset = offset\n        offset = (offset + note.duration) % (this.beatsPerBar * Utils.duration(this.beatDuration))\n      }\n\n      this.note_(audioCtx.currentTime)\n    }\n  }\n\n  rewind () {\n    if (this.stopped) return\n\n    if (this.paused) {\n      this.noteIndex = 0\n      return\n    }\n\n    let self = this\n    this.donePlaying = false\n    this.stop()\n    let recfun = function () {\n      if (self.donePlaying) self.play()\n      else setTimeout(recfun, 100)\n    }\n    recfun()\n  }\n\n  getTempo () {\n    return (this.tempo * this.speedpct / 100.0).toFixed(0)\n  }\n\n  speed (pct) {\n    if (pct < 0) throw new Error('Invalid tempo percentage: ' + pct)\n\n    this.speedpct = pct\n\n    // compute ms per duration unit based on given tempo and beat duration\n    let msPerBeat = 60000 / (this.tempo * this.speedpct / 100.0) // ms/beat = ms/minute : beats/minute\n    this.msPerUnit = msPerBeat / Utils.duration(this.beatDuration) // ms/unit = ms/beat : units/beat\n    console.info('Player gone to ' + msPerBeat + ' ms / beat')\n  }\n\n  speedup (step) {\n    this.speed(Math.min(500, this.speedpct + step))\n  }\n\n  slowdown (step) {\n    this.speed(Math.max(20, this.speedpct - step))\n  }\n\n  setMode (mode) {\n    this.mode = parseInt(mode, 10)\n    console.info('Player gone to mode ' + mode)\n  }\n\n  setType (type) {\n    this.type = type\n    console.info('Player gone to type ' + type)\n  }\n\n  setDisto (d) {\n    this.distortion = parseInt(d, 10)\n    console.info('Player gone to disto ' + d)\n  }\n\n  setVolume (v) {\n    this.volume = parseInt(v, 10)\n    console.info('Player gone to volume ' + v)\n  }\n}\n"],"names":["Utils","a","b","length","i","str","spaces","s","charAt","toUpperCase","slice","firstUpper","camel","toLowerCase","replace","match","group1","char","isNaN","isFinite","Error","text1","text2","sepLine","keepEmptyLines","a1","split","a2","map","v","lines","trim","push","join","data","ret","d","encodeURIComponent","code","units","duration","codes","current","rest","durationcode","e","fret","String","fromCharCode","charCodeAt","parseInt","startingFret","char2fret","relFret","fret2char","chord","strings","tablature","name","fingering","result","string","indexOf","xIndex","mute","chordStrings","chordDuration","hidden","inline","ParserException","line","message","Parser_","songcheat","text","tokens","tokenize","tokenIndex","token","keyword","isKeyword","value","params","handler","handleDefault","call","lastResult","chordIndex","rhythmIndex","partIndex","unitIndex","chords","rhythms","parts","paramIndex","param","Math","floor","camelCase","reSpaces","reNewline","lineNumber","values","vIndex","parseFloat","handleSignature","comment","rhythm","bar","substr","foundRhythmId","id","handleRhythm","part","JSON","parse","stringify","foundChordId","handleChord","handlePart","sub","splice","bars","pIndex","phrases","readBar","foundPart","p","phraseIndex","ph","found","Parser","parser_","log","getPrecedingKeyword","CompilerException","Compiler_","DEBUG","console","apply","arguments","mode","lyricsMode","barsPerLine","signature","key","time","beatDuration","beatsPerBar","symbol","lyricsUnit","barDuration","resolveIds","structure","unitsByPart","numberByPart","unit","colors","color","compileRhythm","phrase","chordChanges","lastChord","addChordChanges","c","barIndex","chordChangesMode","resolveId","Array","chordId","collection","initialNoteDuration","score","noteDuration","placeholdercount","position","lastToken","compiledScore","tied","flags","placeholderIndex","flagsString","stroke","accent","pm","flag","o","resetAtBars","offset","note","Compiler","compiler_","title","compile","MIN_LYRICS_BARLEN","LYRICS_SUM_DURATIONS","KEEP_EMPTY_LINES","LyricsException","Lyrics_","defaultCursorStep","warnings","lyrics","groups","registerGroup","missingDuration","durationcodes","group","groupLength","getGroupLength","plen","max","ceil","pmax","g","getChordDisplay","debugText","zeroDuration","toFixed","maxConsecutiveSpaces","showDots","unitText","groupIndex","needFinalSpace","maxLength","min","minLength","filler","groupText","chordInserts","lengthStillToPlaceOnThisGroup","lengthYetPlacedOnThisGroup","chordChange","positionDelta","positionDelta_","chordInsert","skip","unitText_","chordText","inserted","interlace","step","addDuration","Lyrics","lyrics_","parseLyrics","getUnitText","ChordPixException","ChordPix","url","barredFret","rel2abs","chordWidth","frets","minFret","filter","x","maxFret","nbFrets","abs2rel","relTablature","VexTabException","VexTab","transpose","vextabchord","strokes","accents","vextab","Chord2VexTab","notes","subtitle","hs","notation","tuning","Note2VexTab","lastInPhrase","warn","textGroups","staveDuration","h","font","gap","available","showUnitIndex","Unit2VexTab","stems","showLyrics","tempo","notesSlashed","lyricsGroups","chordGroups","fingeringGroups","pmGroups","lastPhraseInPart","lastBarInPhrase","noteIndex","phraseNote","chordedPhraseNote","partDone","Notes2Stave","Text2VexTab","Player","audioCtx","config","MODE_RHYTHM","MODE_BASS","MODE_CHORDS","loop","onDone","onCountdown","capo","shuffle","stopped","paused","speed","setDisto","setVolume","setMode","setType","type","amount","k","nSamples","curve","Float32Array","deg","PI","abs","frequency","volume","distortion","onended","gainNode","createGain","gain","distoNode","createWaveShaper","makeDistortionCurve","oversample","connect","destination","oscillator","createOscillator","waveTables","setPeriodicWave","createPeriodicWave","real","imag","start","stop","freqs","pow","ms_","msPerUnit","self","donePlaying","nextPlayedNote","isBar","isBeat","isUp","isDown","isArpeggiated","padEnd","info","currentTime","note_","ms","noteFreqs","chord2frequencies","nextNoteIndex","nextNote","nextNoteFreqs","arraysEqual","beepduration","reverse","what","fIndex","delay","sound","cd","countdown","setTimeout","play","recfun","speedpct","pct","msPerBeat"],"mappings":"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"}